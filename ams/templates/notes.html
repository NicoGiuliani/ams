{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container my-5">
  {% if messages %}
  {% for message in messages %}
  <p class="text-success">{{message}}</p>
  {% endfor %}
  {% endif %}
  <h1 class="m-0">Notes for {{entry.name}}</h1>
  <div class="d-flex flex-row gap-5">
    <div class="col-8">
      <table class="table table-hover">
        <thead>
          <tr">
            <th scope="col">Note</th>
            <th scope="col">Created at</th>
            <th scope="col">Options</th>
          </tr>
        </thead>
        <tbody>
          {% if notes %}
          {% for note in notes %}
          <tr>
            <td class="col-7">
              {{note.text}}
            </td>
            <td class="col-4">
              {{note.created_at}}
            </td>
            <td class="col-1">
              <div class="menu_options d-flex flex-row gap-3">
                <a href="{% url 'edit_note' note.id %}" title="Edit this note">
                  <i class="fa-regular fa-pen-to-square text-secondary"></i>
                </a>
                <a href="{% url 'delete_note' note.id %}">
                  <i class="fa-regular fa-trash-can text-secondary" title="Delete this note"></i>
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
    <div class="col-4">
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        
        <input 
          class="btn btn-dark" 
          type="submit" 
          value="{% if form.text.value %}Edit note{% else %}Add note{% endif %}"
        />
        {% if form.text.value %}
        <a href='{% url "notes" entry.id %}' class="btn btn-secondary">Cancel</a>
        {% endif %}
      </form>
    </div>
  </div>
  <a href="{% url 'entry' entry.id %}" class="btn btn-light" style="position:absolute;top:108px;left:20px">Back</a>
</div>
{% endblock %}